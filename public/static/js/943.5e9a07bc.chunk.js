"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[943],{9943:function(e,t,i){i.r(t);var a=i(4942),s=i(885),l=i(7313),o=i(6352),n=i(7041),c=i(6417),r={discountInvoiceValue:"0.00"};t.default=function(e){var t=e.blockCharge,i=(0,o.I0)(),u=(0,o.v9)((function(e){return e.invoice})),d=u.porcentajeIva,v=u.tareaTerminada,p=u.activeInvoice,m=(0,o.v9)((function(e){return e.ui})).actionView,h=(0,l.useState)(r),f=(0,s.Z)(h,2),x=f[0],F=f[1],N=x.discountInvoiceValue;(0,l.useEffect)((function(){var e=function(){var e,t,a,s,l,o,c,r=0,u=0,v=0,m=0,h=0,f=0,x=0,F=d/100,j=0;p[0].listProducts.map((function(e,t){return s="string"===typeof e.precio?parseFloat(e.precio.trim()):e.precio,l="string"===typeof e.cantidad?parseFloat(e.cantidad.trim()):e.precio,v=parseFloat(s)*parseFloat(l),m+=v,o="string"===typeof e.impuesto?parseInt(e.impuesto.trim()):e.impuesto,x=parseInt(o),c="string"===typeof e.total?parseFloat(e.total.trim()):e.total,1===x&&0===p[0].clienteRegistraIva?(f=parseFloat(c),r+=f):(h=parseFloat(c),u+=h),{}})),e=m,t=u+r;var g;g=parseFloat(N.trim()).toFixed(2);var I=((a=parseFloat(g))*t/100).toFixed(2)+"";h=u,h-=a*h/100,f=r;var b=(j=(f-=a*f/100)*F).toFixed(2)+"",P=(f+h+j).toFixed(2)+"",V={base_0:h,base_i:f,bruto:e,descto:I,impuesto:b,neto:t,pdescto:a,total:P,listProducts:p[0].listProducts};i((0,n.Xp)(V))};(p[0]&&p[0].listProducts&&0===p[0].listProducts.length&&m&&("newInvoice"!==m&&"editInvoice"!==m||v&&v.length>0&&(e(),i((0,n.GN)("")))),p[0]&&p[0].listProducts&&p[0].listProducts.length>0&&m)&&("newInvoice"!==m&&"editInvoice"!==m||p[0].listProducts.filter((function(e){return e.total&&e.total.trim().length>0})).length>0&&v&&v.length>0&&(e(),i((0,n.GN)(""))))}),[m,p,N,i,d,v]),(0,l.useEffect)((function(){if(p[0]&&p[0].pdescto){var e={discountInvoiceValue:parseFloat(p[0].pdescto).toFixed(2)+""};F(e)}}),[p]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"values-invoice",children:[(0,c.jsx)("p",{className:"title-value-invoice",children:"Subtotal:"}),p[0]&&p[0].neto?(0,c.jsx)("p",{className:"detail-value-invoice",children:parseFloat(p[0].neto).toFixed(2)}):(0,c.jsx)("p",{className:"detail-value-invoice",children:"0.00"})]}),(0,c.jsxs)("div",{className:"values-invoice",children:[(0,c.jsx)("p",{className:"title-value-invoice",children:"%Descuento:"}),(0,c.jsxs)("div",{className:"discount-invoice-container",children:[(0,c.jsx)("input",{name:"discountInvoiceValue",value:N,onChange:function(e){var t=e.target;""===t.value?F((0,a.Z)({},t.name,"0.00")):F((0,a.Z)({},t.name,t.value)),i((0,n.GN)("changeInputDescto"))},disabled:t,className:"discount-invoice-input",autoComplete:"off",type:"number",placeholder:"0.00"}),p[0]&&p[0].descto?(0,c.jsx)("p",{className:"detail-value-invoice info",children:"$"+parseFloat(p[0].descto).toFixed(2)}):(0,c.jsx)("p",{className:"detail-value-invoice info",children:"$0.00"})]})]}),(0,c.jsxs)("div",{className:"values-invoice",children:[(0,c.jsx)("p",{className:"title-value-invoice",children:"IVA:"}),p[0]&&p[0].impuesto?(0,c.jsx)("p",{className:"detail-value-invoice",children:parseFloat(p[0].impuesto).toFixed(2)}):(0,c.jsx)("p",{className:"detail-value-invoice",children:"0.00"})]}),(0,c.jsxs)("div",{className:"values-invoice",children:[(0,c.jsx)("p",{className:"title-value-invoice total",children:"TOTAL:"}),p[0]&&p[0].total?(0,c.jsx)("p",{className:"detail-value-invoice total",children:p[0].total}):(0,c.jsx)("p",{className:"detail-value-invoice total",children:"0.00"})]})]})}}}]);